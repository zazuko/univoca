PREFIX schema: <http://schema.org/>
PREFIX dcterms: <http://purl.org/dc/terms/>
prefix hydra: <http://www.w3.org/ns/hydra/core#>
prefix code: <https://code.described.at/>
prefix knossos: <https://hypermedia.app/knossos#>
prefix univoca: <https://described.at/univoca/>
prefix hex: <https://w3id.org/hydra/extension#>

<>
  a hydra:ApiDocumentation ;
  hydra:entrypoint <../> ;
.

univoca:HierarchyCollection
  a hydra:Class ;
  hydra:apiDocumentation <> ;
  knossos:memberTemplate
    [
      hydra:template "/hierarchy/{name}" ;
      hydra:mapping
        [
          hydra:variable "name" ;
          hydra:property schema:name ;
          hydra:required true ;
          knossos:transformVariable
            [
              a code:EcmaScriptModule ;
              code:link <file:apps/api/lib/Hierarchy.js#slugifyName> ;
            ] ;
        ] ;
    ] ;
  hydra:supportedOperation
    [
      a schema:CreateAction ;
      hydra:method "POST" ;
      hydra:title "Create shared dimension" ;
      hydra:expects </api/univoca/Hierarchy> ;
      code:implementedBy
        [
          a code:EcmaScriptModule ;
          code:link <node:@hydrofoil/knossos/collection.js#CreateMember> ;
        ] ;
    ] ;
.


univoca:TermSetCollection
  a hydra:Class ;
  hydra:apiDocumentation <> ;
  knossos:preprocessResponse
    [
      a code:EcmaScriptModule ;
      code:link <file:apps/api/lib/SharedDimension.js#injectTermsLink> ;
    ] ;
  knossos:preprocessPayload
    [
      a code:EcmaScriptModule ;
      code:link <file:apps/api/lib/SharedDimension.js#prepareCreated> ;
    ] ;
  knossos:memberTemplate
    [
      hydra:template "/dimension/{identifier}" ;
      hydra:mapping
        [
          hydra:variable "identifier" ;
          hydra:property dcterms:identifier ;
          hydra:required true ;
        ] ;
    ] ;
  hydra:supportedOperation
    [
      a hydra:supportedOperation, schema:CreateAction ;
      hydra:method "POST" ;
      hydra:title "Create shared dimension" ;
      hydra:expects </api/univoca/NewOrImportedDimension> ;
      code:implementedBy
        [
          a code:EcmaScriptModule ;
          code:link <file:apps/api/handlers/term-sets.js#post> ;
        ] ;
      hex:multiPartPath </api#export> ;
    ] ;
.
